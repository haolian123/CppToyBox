# 智能指针

智能指针是 C++ 标准库中的一部分，用于自动管理动态分配的内存，以减少内存泄漏和指针误用的风险。主要有 `scoped_ptr`（Boost 库）、`unique_ptr` 和 `shared_ptr` 这三种类型。

## scoped_ptr

### 定义

- `scoped_ptr` 是 Boost 库中提供的一种智能指针。
- 它不是 C++ 标准库的一部分。

### 主要特点

- **禁止复制和赋值**：确保指针的唯一性，避免多个指针指向同一资源。
- **自动释放资源**：指针离开作用域时，所指向的对象会被自动销毁。
- **使用场景**：适合于作用域内资源管理。

### 缺点

- 不能用于容器。
- 不支持引用计数和所有权转移。

## unique_ptr

### 定义

- `unique_ptr` 是 C++11 标准库中的智能指针。

### 主要特点

- **唯一所有权**：同一时间内只有一个 `unique_ptr` 可以拥有某个对象的所有权。
- **支持移动语义**：可以通过移动语义转移所有权，但不支持复制。
- **自动释放资源**：当 `unique_ptr` 被销毁或离开作用域时，所指向的对象会被自动销毁。
- **灵活性**：可以与自定义删除器一起使用。

### 使用场景

- 适用于需要确保资源唯一性的场合。

## shared_ptr

### 定义

- `shared_ptr` 是 C++11 标准库中的智能指针。

### 主要特点

- **共享所有权**：允许多个 `shared_ptr` 实例共享同一对象的所有权。
- **引用计数**：内部使用引用计数机制来跟踪有多少个 `shared_ptr` 实例正在指向同一个资源。
- **自动释放资源**：当最后一个指向对象的 `shared_ptr` 被销毁或重新指向其他对象时，原对象会被自动销毁。
- **线程安全**：在多线程环境中，对 `shared_ptr` 的读取操作是线程安全的。

### 使用场景

- 适用于多个指针需要共享同一个资源的情况。

## 总结

- `scoped_ptr` 提供了最基本的作用域内资源管理，但功能相对有限，主要用于单一作用域内。
- `unique_ptr` 提供了对单一对象的唯一所有权管理，支持所有权的移动，但不支持共享。
- `shared_ptr` 允许多个指针共享对同一资源的所有权，适用于资源在多个对象间共享的情况，但相较于 `unique_ptr` 有更高的性能开销。
